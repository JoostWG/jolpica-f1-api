"use strict";var U=Object.create;var y=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames;var W=Object.getPrototypeOf,H=Object.prototype.hasOwnProperty;var K=(n,i)=>{for(var t in i)y(n,t,{get:i[t],enumerable:!0})},I=(n,i,t,s)=>{if(i&&typeof i=="object"||typeof i=="function")for(let p of $(i))!H.call(n,p)&&p!==t&&y(n,p,{get:()=>i[p],enumerable:!(s=E(i,p))||s.enumerable});return n};var B=(n,i,t)=>(t=n!=null?U(W(n)):{},I(i||!n||!n.__esModule?y(t,"default",{value:n,enumerable:!0}):t,n)),J=n=>I(y({},"__esModule",{value:!0}),n);var V={};K(V,{Api:()=>Q});module.exports=J(V);var F=B(require("axios"));var R=class extends Error{};var d=class extends R{constructor(t,s){super(s);this.status=t}};var A=class extends d{constructor(t){super(400,t);this.detail=t}};var D=class extends d{constructor(t,s){super(404,s);this.response=t}};var o=class{constructor(i){this.api=i}};var P=class extends o{constructor(i,t){super(t),this.units=i.units,this.speed=Number(i.speed)}get kph(){if(this.units==="kph")return this.speed;throw new Error("Invalid speed unit")}get mph(){return this.kph*.621371192}};var v=class extends o{constructor(i,t){super(t),this.latitude=Number(i.lat),this.longitude=Number(i.long),this.locality=i.locality,this.country=i.country}};var h=class extends o{constructor(i,t){super(t),this.id=i.circuitId,this.wikiUrl=i.url,this.name=i.circuitName,this.location=new v(i.Location,this.api)}};var c=class extends o{constructor(i,t){super(t),this.id=i.driverId,this.firstName=i.givenName,this.lastName=i.familyName,this.dateOfBirth=i.dateOfBirth!==void 0?new Date(i.dateOfBirth):null,this.nationality=i.nationality??null,this.number=i.permanentNumber!==void 0?Number(i.permanentNumber):null,this.code=i.code??null,this.wikiUrl=i.url??null}get name(){return`${this.firstName} ${this.lastName}`}get age(){return this.ageAt(new Date)}ageAt(i){if(this.dateOfBirth===null)return null;let t=i.getFullYear()-this.dateOfBirth.getFullYear();return this.dateOfBirth.getMonth()>i.getMonth()||this.dateOfBirth.getMonth()===i.getMonth()&&this.dateOfBirth.getDate()>i.getDate()?t-1:t}circuits(i){return this.api.circuits(this.getOptions(i))}driverStandings(i){return this.api.driverStandings(this.getOptions(i))}laps(i){return this.api.laps(this.getOptions(i))}pitStops(i){return this.api.pitStops(this.getOptions(i))}qualifyingResults(i){return this.api.qualifyingResults(this.getOptions(i))}races(i){return this.api.races(this.getOptions(i))}results(i){return this.api.results(this.getOptions(i))}seasons(i){return this.api.seasons(this.getOptions(i))}sprintResults(i){return this.api.sprintResults(this.getOptions(i))}statuses(i){return this.api.statuses(this.getOptions(i))}teams(i){return this.api.teams(this.getOptions(i))}getOptions(i){return{driver:this.id,...i}}};var l=class extends o{constructor(i,t){super(t),this.id=i.constructorId??null,this.wikiUrl=i.url??null,this.name=i.name,this.nationality=i.nationality??null}};var x=class extends o{constructor(i,t,s,p){super(p),this.season=Number(t),this.round=Number(s),this.position=i.position!==void 0?Number(i.position):null,this.positionText=i.positionText,this.points=Number(i.points),this.wins=Number(i.wins),this.driver=new c(i.Driver,this.api),this.teams=i.Constructors.map(f=>new l(f,this.api))}};var w=class extends o{constructor(i,t){super(t),this.time=i.time}};var g=class extends o{constructor(i,t){super(t),this.rank=Number(i.rank),this.lap=Number(i.lap),this.time=new w(i.Time,this.api),this.averageSpeed=i.AverageSpeed!==void 0?new P(i.AverageSpeed,this.api):null}};var b=class extends o{constructor(i,t){super(t),this.milliseconds=Number(i.millis),this.time=i.time}};var m=class extends o{constructor(i,t){super(t),this.date=i.date??null,this.time=i.time??null}};var u=class extends o{constructor(i,t){super(t),this.season=Number(i.season),this.round=Number(i.round),this.wikiUrl=i.url??null,this.name=i.raceName,this.circuit=new h(i.Circuit,this.api),this.date=i.date,this.time=i.time??null,this.firstPractice=i.FirstPractice!==void 0?new m(i.FirstPractice,this.api):null,this.secondPractice=i.SecondPractice!==void 0?new m(i.SecondPractice,this.api):null,this.thirdPractice=i.ThirdPractice!==void 0?new m(i.ThirdPractice,this.api):null,this.qualifying=i.Qualifying!==void 0?new m(i.Qualifying,this.api):null,this.sprint=i.Sprint!==void 0?new m(i.Sprint,this.api):null,this.sprintQualifying=i.SprintQualifying!==void 0?new m(i.SprintQualifying,this.api):null,this.sprintShootout=i.SprintShootout!==void 0?new m(i.SprintShootout,this.api):null}get dateTime(){return new Date(this.time!==null?`${this.date}T${this.time}`:this.date)}async calculateCircuitLength(){let{data:i}=await this.results().get({limit:100}),t=i.map(s=>s.calculateCircuitLength()).filter(s=>s!==null);return t.length===0?null:t.reduce((s,p)=>s+p,0)/t.length}results(i){return this.api.results(this.getOptions(i))}getOptions(i){return{season:this.season,round:this.round,...i}}};var O=class extends o{constructor(i,t){super(t),this.driverId=i.driverId,this.position=Number(i.position),this.time=i.time}};var L=class extends o{constructor(i,t,s){super(s),this.number=Number(i.number),this.timings=i.Timings.map(p=>new O(p,this.api)),this.race=new u(t,this.api)}};var C=class extends o{constructor(i,t,s){super(s),this.driverId=i.driverId,this.lap=i.lap!==void 0?Number(i.lap):null,this.stop=i.stop!==void 0?Number(i.stop):null,this.time=i.time??null,this.duration=i.duration!==void 0?Number(i.duration):null,this.race=new u(t,this.api)}};var S=class extends o{constructor(i,t,s){super(s),this.number=Number(i.number),this.position=i.position!==void 0?Number(i.position):null,this.driver=new c(i.Driver,this.api),this.team=new l(i.Constructor,this.api),this.q1=i.Q1??null,this.q2=i.Q2??null,this.q3=i.Q3??null,this.race=new u(t,this.api)}};var N=class extends o{constructor(i,t,s){super(s),this.number=Number(i.number),this.position=i.position,this.positionText=i.positionText,this.points=Number(i.points),this.driver=new c(i.Driver,this.api),this.team=i.Constructor!==void 0?new l(i.Constructor,this.api):null,this.grid=i.grid!==void 0?Number(i.grid):null,this.laps=i.laps!==void 0?Number(i.laps):null,this.status=i.status??null,this.fastestLap=i.FastestLap!==void 0?new g(i.FastestLap,this.api):null,this.finishingTime=i.Time!==void 0?new b(i.Time,this.api):null,this.race=new u(t,this.api)}get driverAge(){return this.driver.ageAt(this.race.dateTime)}calculateCircuitLength(){if(!this.fastestLap?.averageSpeed)return null;let i=this.fastestLap.time.time.match(/(?<minutes>\d+):(?<seconds>\d+.\d+)/u);return i?.groups?(Number(i.groups.minutes)/60+Number(i.groups.seconds)/3600)*this.fastestLap.averageSpeed.kph*1e3:null}};var M=class extends o{constructor(i,t){super(t),this.year=Number(i.season),this.wikiUrl=i.url}};var q=class extends o{constructor(i,t,s){super(s),this.number=Number(i.number),this.position=i.position,this.positionText=i.positionText,this.points=Number(i.points),this.driver=new c(i.Driver,this.api),this.team=i.Constructor!==void 0?new l(i.Constructor,this.api):null,this.grid=i.grid!==void 0?Number(i.grid):null,this.laps=i.laps!==void 0?Number(i.laps):null,this.status=i.status??null,this.finishingTime=i.Time!==void 0?new b(i.Time,this.api):null,this.fastestLap=i.FastestLap!==void 0?new g(i.FastestLap,this.api):null,this.race=new u(t,this.api)}};var T=class extends o{constructor(i,t){super(t),this.id=i.statusId,this.count=Number(i.count),this.name=i.status}};var j=class extends o{constructor(i,t,s,p){super(p),this.season=Number(t),this.round=Number(s),this.position=i.position??null,this.positionText=i.positionText,this.points=Number(i.points),this.wins=Number(i.wins),this.team=new l(i.Constructor,this.api)}};var a=class{constructor(i,t,s,p,f){this.api=i;this.resource=t;this.options=s;this.transform=p;this.validator=f}get url(){return this.api.baseUrl+this.getPath()}async get(i){let t=this.validator.parse(await this.api.get(this.getPath(),i));return{meta:{limit:Number(t.MRData.limit),offset:Number(t.MRData.offset),total:Number(t.MRData.total)},data:this.transform(t.MRData)}}async getOne(i){let{data:t}=await this.get({limit:1,...i??{}});return t.length>0?t[0]:null}getPath(){let i=`/${this.resource}`,t=[];return this.options.season&&(t.push(String(this.options.season)),this.options.round&&t.push(String(this.options.round))),this.options.circuit&&t.push("circuits",this.options.circuit),this.options.driver&&t.push("drivers",this.options.driver),this.options.team&&t.push("constructors",this.options.team),this.options.lap&&t.push("laps",String(this.options.lap)),this.options.pitStopNumber&&t.push("pitstops",String(this.options.pitStopNumber)),this.options.fastestRank&&t.push("fastest",String(this.options.fastestRank)),this.options.gridPosition&&t.push("grid",String(this.options.gridPosition)),this.options.finishPosition&&t.push("results",String(this.options.finishPosition)),this.options.status&&t.push("status",this.options.status),this.options.driverStanding&&t.push("driverstandings",String(this.options.driverStanding)),this.options.qualifying&&t.push("qualifying",String(this.options.qualifying)),this.options.teamStanding&&t.push("constructorstandings",String(this.options.teamStanding)),t.length===0?i:`/${t.join("/")}${i}`}};var r=B(require("zod"));var Z=(e=>(e.Finished="1",e.Disqualified="2",e.Accident="3",e.Collision="4",e.Engine="5",e.Gearbox="6",e.Transmission="7",e.Clutch="8",e.Hydraulics="9",e.Electrical="10",e.Plus1Lap="11",e.Plus2Laps="12",e.Plus3Laps="13",e.Plus4Laps="14",e.Plus5Laps="15",e.Plus6Laps="16",e.Plus7Laps="17",e.Plus8Laps="18",e.Plus9Laps="19",e.SpunOff="20",e.Radiator="21",e.Suspension="22",e.Brakes="23",e.Differential="24",e.Overheating="25",e.Mechanical="26",e.Tyre="27",e.DriverSeat="28",e.Puncture="29",e.Driveshaft="30",e.Retired="31",e.FuelPressure="32",e.FrontWing="33",e.WaterPressure="34",e.Refuelling="35",e.Wheel="36",e.Throttle="37",e.Steering="38",e.Technical="39",e.Electronics="40",e.BrokenWing="41",e.HeatShieldFire="42",e.Exhaust="43",e.OilLeak="44",e.Plus11Laps="45",e.WheelRim="46",e.WaterLeak="47",e.FuelPump="48",e.TrackRod="49",e.Plus17Laps="50",e.OilPressure="51",e.Plus13Laps="53",e.Withdrew="54",e.Plus12Laps="55",e.EngineFire="56",e.Plus26Laps="58",e.TyrePuncture="59",e.OutOfFuel="60",e.WheelNut="61",e.NotClassified="62",e.Pneumatics="63",e.Handling="64",e.RearWing="65",e.Fire="66",e.WheelBearing="67",e.Physical="68",e.FuelSystem="69",e.OilLine="70",e.FuelRig="71",e.LaunchControl="72",e.Injured="73",e.Fuel="74",e.PowerLoss="75",e.Vibrations="76",e.Safety="78",e.Drivetrain="79",e.Ignition="80",e.Injury="82",e.Chassis="83",e.Battery="84",e.Stalled="85",e.Halfshaft="86",e.Crankshaft="87",e.Plus10Laps="88",e.SafetyConcerns="89",e.NotRestarted="90",e.Alternator="91",e.Underweight="92",e.SafetyBelt="93",e.OilPump="94",e.FuelLeak="95",e.Excluded="96",e.Injection="98",e.Distributor="99",e.DriverUnwell="100",e.Turbo="101",e.CVJoint="102",e.WaterPump="103",e.FatalAccident="104",e.SparkPlugs="105",e.FuelPipe="106",e.EyeInjury="107",e.OilPipe="108",e.Axle="109",e.WaterPipe="110",e.Plus14Laps="111",e.Plus15Laps="112",e.Plus25Laps="113",e.Plus18Laps="114",e.Plus22Laps="115",e.Plus16Laps="116",e.Plus24Laps="117",e.Plus29Laps="118",e.Plus23Laps="119",e.Plus21Laps="120",e.Magneto="121",e.Plus44Laps="122",e.Plus30Laps="123",e.Plus19Laps="124",e.Plus46Laps="125",e.Supercharger="126",e.Plus20Laps="127",e.Plus42Laps="128",e.EngineMisfire="129",e.CollisionDamage="130",e.PowerUnit="131",e.ERS="132",e.BrakeDuct="135",e.Seat="136",e.Damage="137",e.Debris="138",e.Illness="139",e.Undertray="140",e.CoolingSystem="141",e.DidNotStart="142",e.Lapped="143",e))(Z||{});var z=class{circuitsResponse(){return this.apiResponse({CircuitTable:r.default.object({Circuits:r.default.array(this.circuit())})})}teamsResponse(){return this.apiResponse({ConstructorTable:r.default.object({Constructors:r.default.array(this.team())})})}teamStandingsResponse(){return this.apiResponse({StandingsTable:r.default.object({StandingsLists:r.default.array(r.default.object({season:this.year(),round:this.integer(),ConstructorStandings:r.default.array(this.teamStanding())}))})})}driversResponse(){return this.apiResponse({DriverTable:r.default.object({Drivers:r.default.array(this.driver())})})}driverStandingsResponse(){return this.apiResponse({StandingsTable:r.default.object({StandingsLists:r.default.array(r.default.object({season:this.year(),round:this.integer(),DriverStandings:r.default.array(this.driverStanding())}))})})}lapsResponse(){return this.apiResponse({RaceTable:r.default.object({Races:r.default.array(this.race().extend({Laps:r.default.array(this.lap())}))})})}pitStopsResponse(){return this.apiResponse({RaceTable:r.default.object({Races:r.default.array(this.race().extend({PitStops:r.default.array(this.pitStop())}))})})}qualifyingResultsResponse(){return this.apiResponse({RaceTable:r.default.object({Races:r.default.array(this.race().extend({QualifyingResults:r.default.array(this.qualifyingResult())}))})})}racesResponse(){return this.apiResponse({RaceTable:r.default.object({Races:r.default.array(this.race())})})}resultsResponse(){return this.apiResponse({RaceTable:r.default.object({Races:r.default.array(this.race().extend({Results:r.default.array(this.result())}))})})}seasonsResponse(){return this.apiResponse({SeasonTable:r.default.object({Seasons:r.default.array(this.season())})})}sprintResultsResponse(){return this.apiResponse({RaceTable:r.default.object({Races:r.default.array(this.race().extend({SprintResults:r.default.array(this.sprintResult())}))})})}statusesResponse(){return this.apiResponse({StatusTable:r.default.object({Status:r.default.array(this.status())})})}averageSpeed(){return r.default.object({units:r.default.string(),speed:this.decimal()})}circuit(){return r.default.object({circuitId:r.default.string(),url:r.default.string(),circuitName:r.default.string(),Location:this.location()})}team(){return r.default.object({constructorId:r.default.string().optional(),url:r.default.string().optional(),name:r.default.string(),nationality:r.default.string().optional()})}teamStanding(){return r.default.object({position:this.integer().optional(),positionText:r.default.string(),points:this.integer(),wins:this.integer(),Constructor:this.team()})}dateTime(){return r.default.object({date:this.date(),time:r.default.string().regex(/^\d{2}:\d{2}:\d{2}Z$/u)})}driver(){return r.default.object({driverId:r.default.string(),givenName:r.default.string(),familyName:r.default.string(),dateOfBirth:this.date().optional(),nationality:r.default.string().optional(),permanentNumber:this.integer().optional(),code:r.default.string().optional(),url:r.default.string().optional()})}driverStanding(){return r.default.object({position:this.integer().optional(),positionText:r.default.string(),points:this.integer(),wins:this.integer(),Driver:this.driver(),Constructors:r.default.array(this.team())})}fastestLap(){return r.default.object({rank:this.integer(),lap:this.integer(),Time:this.fastestLapTime(),AverageSpeed:this.averageSpeed().optional()})}fastestLapTime(){return r.default.object({time:r.default.string()})}finishingTime(){return r.default.object({millis:this.integer(),time:r.default.string()})}lap(){return r.default.object({number:this.integer(),Timings:r.default.array(this.timing())})}location(){return r.default.object({lat:this.decimal(),long:this.decimal(),locality:r.default.string(),country:r.default.string()})}pitStop(){return r.default.object({driverId:r.default.string(),lap:this.integer().optional(),stop:this.integer().optional(),time:r.default.string().optional()})}qualifyingResult(){return r.default.object({number:this.integer(),position:this.integer().optional(),Driver:this.driver(),Constructor:this.team(),Q1:r.default.string().optional(),Q2:r.default.string().optional(),Q3:r.default.string().optional()})}race(){return r.default.object({season:this.year(),round:this.integer(),url:r.default.string().optional(),raceName:r.default.string(),Circuit:this.circuit(),date:this.date(),time:r.default.string().optional(),FirstPractice:this.dateTime().optional(),SecondPractice:this.dateTime().optional(),ThirdPractice:this.dateTime().optional(),Qualifying:this.dateTime().optional(),Sprint:this.dateTime().optional(),SprintQualifying:this.dateTime().optional(),SprintShootout:this.dateTime().optional()})}result(){return r.default.object({number:this.integer(),position:this.integer(),positionText:r.default.string(),points:this.integer(),Driver:this.driver(),Constructor:this.team().optional(),grid:this.integer().optional(),laps:this.integer().optional(),status:r.default.string().optional(),FastestLap:this.fastestLap().optional(),Time:this.finishingTime().optional()})}season(){return r.default.object({season:this.year(),url:r.default.string()})}sprintResult(){return r.default.object({number:this.integer(),position:this.integer(),positionText:r.default.string(),points:this.integer(),Driver:this.driver(),Constructor:this.team().optional(),grid:this.integer().optional(),laps:this.integer().optional(),status:r.default.string().optional(),Time:this.finishingTime().optional(),FastestLap:this.fastestLap().optional()})}status(){return r.default.object({statusId:r.default.enum(Z),count:this.integer(),status:r.default.string()})}timing(){return r.default.object({driverId:r.default.string(),position:this.integer(),time:r.default.string()})}apiResponse(i){return r.default.object({MRData:r.default.object({xmlns:r.default.literal(""),series:r.default.literal("f1"),url:r.default.string(),limit:this.integer(),offset:this.integer(),total:this.integer()}).extend(i)})}year(){return r.default.string().regex(/^\d{4}$/u)}integer(){return r.default.string().regex(/^-?\d+$/u)}decimal(){return r.default.string().regex(/^-?\d+(\.\d+)?$/u)}date(){return r.default.string().regex(/^\d{4}-\d{2}-\d{2}$/u)}};var Q=class{constructor({cache:i,config:t}={}){this.baseUrl="https://api.jolpi.ca/ergast/f1",this.axios=F.default.create({baseURL:this.baseUrl,validateStatus:s=>s>=200&&s<=299||s>=400&&s<=499,headers:new F.AxiosHeaders().setAccept("application/json"),...t}),this.cache=i,this.validator=new z}circuits(i){return new a(this,"circuits",i??{},t=>t.CircuitTable.Circuits.map(s=>new h(s,this)),this.validator.circuitsResponse())}driverStandings(i){return new a(this,"driverstandings",i,t=>t.StandingsTable.StandingsLists.flatMap(s=>s.DriverStandings.map(p=>new x(p,s.season,s.round,this))),this.validator.driverStandingsResponse())}drivers(i){return new a(this,"drivers",i??{},t=>t.DriverTable.Drivers.map(s=>new c(s,this)),this.validator.driversResponse())}laps(i){return new a(this,"laps",i,t=>t.RaceTable.Races.flatMap(s=>s.Laps.map(p=>new L(p,s,this))),this.validator.lapsResponse())}pitStops(i){return new a(this,"pitstops",i,t=>t.RaceTable.Races.flatMap(s=>s.PitStops.map(p=>new C(p,s,this))),this.validator.pitStopsResponse())}qualifyingResults(i){return new a(this,"qualifying",i??{},t=>t.RaceTable.Races.flatMap(s=>s.QualifyingResults.map(p=>new S(p,s,this))),this.validator.qualifyingResultsResponse())}races(i){return new a(this,"races",i??{},t=>t.RaceTable.Races.map(s=>new u(s,this)),this.validator.racesResponse())}results(i){return new a(this,"results",i??{},t=>t.RaceTable.Races.flatMap(s=>s.Results.map(p=>new N(p,s,this))),this.validator.resultsResponse())}seasons(i){return new a(this,"seasons",i??{},t=>t.SeasonTable.Seasons.map(s=>new M(s,this)),this.validator.seasonsResponse())}sprintResults(i){return new a(this,"sprint",i??{},t=>t.RaceTable.Races.flatMap(s=>s.SprintResults.map(p=>new q(p,s,this))),this.validator.sprintResultsResponse())}statuses(i){return new a(this,"status",i??{},t=>t.StatusTable.Status.map(s=>new T(s,this)),this.validator.statusesResponse())}teamStandings(i){return new a(this,"constructorstandings",i,t=>t.StandingsTable.StandingsLists.flatMap(s=>s.ConstructorStandings.map(p=>new j(p,s.season,s.round,this))),this.validator.teamStandingsResponse())}teams(i){return new a(this,"constructors",i??{},t=>t.ConstructorTable.Constructors.map(s=>new l(s,this)),this.validator.teamsResponse())}async get(i,t,s){if(this.cache){let k=await this.cache.get(i,t);if(k!==null)return k}let p=await this.axios.get(`${i}.json`,{params:t,...s});if(p.status===404)throw new D(p);if(this.responseIsBadRequest(p))throw new A(p.data.detail);if(p.status!==200)throw new d(p.status);let f=p.data;return this.cache&&await this.cache.set(f,p.headers["Cache-Control"],i,t),f}responseIsBadRequest(i){return i.status===400}};0&&(module.exports={Api});
