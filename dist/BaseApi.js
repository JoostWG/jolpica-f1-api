"use strict";var h=Object.create;var i=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var R=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty;var y=(s,e)=>{for(var t in e)i(s,t,{get:e[t],enumerable:!0})},d=(s,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of m(e))!A.call(s,o)&&o!==t&&i(s,o,{get:()=>e[o],enumerable:!(r=f(e,o))||r.enumerable});return s};var b=(s,e,t)=>(t=s!=null?h(R(s)):{},d(e||!s||!s.__esModule?i(t,"default",{value:s,enumerable:!0}):t,s)),g=s=>d(i({},"__esModule",{value:!0}),s);var w={};y(w,{BaseApi:()=>u});module.exports=g(w);var c=b(require("axios"));var a=class extends Error{constructor(t,r){super(r);this.status=t}};var n=class extends a{constructor(t){super(400,t);this.detail=t}};var p=class extends a{constructor(t,r){super(404,r);this.response=t}};var u=class{constructor({cache:e,config:t}={}){this.axios=c.default.create({baseURL:"https://api.jolpi.ca/ergast/f1",validateStatus:r=>r>=200&&r<=299||r>=400&&r<=499,...t}),this.cache=e}async get(e,t,r){if(this.cache){let l=await this.cache.get(e,t);if(l!==null)return l}let o=await this.axios.get(`${e}.json`,{headers:new c.AxiosHeaders().setAccept("application/json"),params:t,...r});if(o.status===404)throw new p(o);if(this.responseIsBadRequest(o))throw new n(o.data.detail);if(o.status!==200)throw new a(o.status);let x=o.data;return this.cache&&await this.cache.set(x,o.headers["Cache-Control"],e,t),x}responseIsBadRequest(e){return e.status===400}};0&&(module.exports={BaseApi});
