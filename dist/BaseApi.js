"use strict";var h=Object.create;var i=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var R=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty;var y=(e,s)=>{for(var t in s)i(e,t,{get:s[t],enumerable:!0})},f=(e,s,t,a)=>{if(s&&typeof s=="object"||typeof s=="function")for(let o of m(s))!A.call(e,o)&&o!==t&&i(e,o,{get:()=>s[o],enumerable:!(a=d(s,o))||a.enumerable});return e};var g=(e,s,t)=>(t=e!=null?h(R(e)):{},f(s||!e||!e.__esModule?i(t,"default",{value:e,enumerable:!0}):t,e)),b=e=>f(i({},"__esModule",{value:!0}),e);var w={};y(w,{BaseApi:()=>u});module.exports=b(w);var c=g(require("axios"));var r=class extends Error{constructor(t,a){super(a);this.status=t}};var n=class extends r{constructor(t){super(400,t);this.detail=t}};var p=class extends r{constructor(s){super(404,s)}};var u=class{constructor({cache:s,config:t}){this.axios=c.default.create({baseURL:"https://api.jolpi.ca/ergast/f1",...t}),this.cache=s}async get(s,t,a){if(this.cache){let l=await this.cache.get(s,t);if(l!==null)return l}let o=await this.axios.get(`${s}.json`,{headers:new c.AxiosHeaders().setContentType("application/json"),params:t,...a});if(o.status===404)throw new p;if(this.responseIsBadRequest(o))throw new n(o.data.detail);if(o.status!==200)throw new r(o.status);let x=o.data;return this.cache&&await this.cache.set(x,s,t),x}responseIsBadRequest(s){return s.status===400}};0&&(module.exports={BaseApi});
