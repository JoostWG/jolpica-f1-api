"use strict";var l=Object.create;var i=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty;var w=(e,s)=>{for(var t in s)i(e,t,{get:s[t],enumerable:!0})},d=(e,s,t,r)=>{if(s&&typeof s=="object"||typeof s=="function")for(let o of m(s))!R.call(e,o)&&o!==t&&i(e,o,{get:()=>s[o],enumerable:!(r=h(s,o))||r.enumerable});return e};var y=(e,s,t)=>(t=e!=null?l(f(e)):{},d(s||!e||!e.__esModule?i(t,"default",{value:e,enumerable:!0}):t,e)),b=e=>d(i({},"__esModule",{value:!0}),e);var g={};w(g,{BaseApi:()=>u});module.exports=b(g);var c=y(require("axios"));var a=class extends Error{constructor(t,r){super(r);this.status=t}};var n=class extends a{constructor(t){super(400,t);this.detail=t}};var p=class extends a{constructor(s){super(404,s)}};var u=class{constructor(s){this.cache=s;this.axios=c.default.create({baseURL:"https://api.jolpi.ca/ergast/f1",headers:new c.AxiosHeaders().setContentType("application/json")})}async get(s,t){if(this.cache){let x=await this.cache.get(s,t);if(x!==null)return x}let r=await this.axios.get(`${s}.json`,{params:t});if(r.status===404)throw new p;if(this.responseIsBadRequest(r))throw new n(r.data.detail);if(r.status!==200)throw new a(r.status);let o=r.data;return this.cache&&await this.cache.set(o,s,t),o}responseIsBadRequest(s){return s.status===400}};0&&(module.exports={BaseApi});
