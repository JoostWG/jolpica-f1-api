"use strict";var f=Object.create;var a=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var R=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty;var y=(s,e)=>{for(var t in e)a(s,t,{get:e[t],enumerable:!0})},d=(s,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of m(e))!A.call(s,r)&&r!==t&&a(s,r,{get:()=>e[r],enumerable:!(o=h(e,r))||o.enumerable});return s};var b=(s,e,t)=>(t=s!=null?f(R(s)):{},d(e||!s||!s.__esModule?a(t,"default",{value:s,enumerable:!0}):t,s)),g=s=>d(a({},"__esModule",{value:!0}),s);var w={};y(w,{BaseApi:()=>u});module.exports=g(w);var c=b(require("axios"));var i=class extends Error{constructor(t,o){super(o);this.status=t}};var p=class extends i{constructor(t){super(400,t);this.detail=t}};var n=class extends i{constructor(t,o){super(404,o);this.response=t}};var u=class{constructor({cache:e,config:t}){this.axios=c.default.create({baseURL:"https://api.jolpi.ca/ergast/f1",validateStatus:o=>o>=200&&o<=299||o>=400&&o<=499,...t}),this.cache=e}async get(e,t,o){if(this.cache){let l=await this.cache.get(e,t);if(l!==null)return l}let r=await this.axios.get(`${e}.json`,{headers:new c.AxiosHeaders().setAccept("application/json"),params:t,...o});if(r.status===404)throw new n(r);if(this.responseIsBadRequest(r))throw new p(r.data.detail);if(r.status!==200)throw new i(r.status);let x=r.data;return this.cache&&await this.cache.set(x,e,t),x}responseIsBadRequest(e){return e.status===400}};0&&(module.exports={BaseApi});
