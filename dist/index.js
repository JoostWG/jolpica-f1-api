"use strict";var U=Object.create;var A=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var W=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,$=Object.prototype.hasOwnProperty;var H=(t,i)=>{for(var r in i)A(t,r,{get:i[r],enumerable:!0})},B=(t,i,r,n)=>{if(i&&typeof i=="object"||typeof i=="function")for(let s of W(i))!$.call(t,s)&&s!==r&&A(t,s,{get:()=>i[s],enumerable:!(n=E(i,s))||n.enumerable});return t};var V=(t,i,r)=>(r=t!=null?U(j(t)):{},B(i||!t||!t.__esModule?A(r,"default",{value:t,enumerable:!0}):r,t)),Y=t=>B(A({},"__esModule",{value:!0}),t);var G={};H(G,{Api:()=>M,BadRequest:()=>h,BaseApi:()=>f,HttpError:()=>a,NotFound:()=>g,PendingRequest:()=>b,StatusType:()=>Q});module.exports=Y(G);var y=V(require("axios"));var a=class extends Error{constructor(r,n){super(n);this.status=r}};var h=class extends a{constructor(r){super(400,r);this.detail=r}};var g=class extends a{constructor(r,n){super(404,n);this.response=r}};var f=class{constructor({cache:i,config:r}={}){this.axios=y.default.create({baseURL:"https://api.jolpi.ca/ergast/f1",validateStatus:n=>n>=200&&n<=299||n>=400&&n<=499,...r}),this.cache=i}async get(i,r,n){if(this.cache){let I=await this.cache.get(i,r);if(I!==null)return I}let s=await this.axios.get(`${i}.json`,{headers:new y.AxiosHeaders().setAccept("application/json"),params:r,...n});if(s.status===404)throw new g(s);if(this.responseIsBadRequest(s))throw new h(s.data.detail);if(s.status!==200)throw new a(s.status);let R=s.data;return this.cache&&await this.cache.set(R,s.headers["Cache-Control"],i,r),R}responseIsBadRequest(i){return i.status===400}};var P=class{constructor(i){this.units=i.units,this.speed=Number(i.speed)}};var D=class{constructor(i){this.latitude=Number(i.lat),this.longitude=Number(i.long),this.locality=i.locality,this.country=i.country}};var c=class{constructor(i,r){this.api=r;this.id=i.circuitId,this.wikiUrl=i.url,this.name=i.circuitName,this.location=new D(i.Location)}};var p=class{constructor(i,r){this.api=r;this.id=i.driverId,this.wikiUrl=i.url,this.firstName=i.givenName,this.lastName=i.familyName,this.dateOfBirth=new Date(i.dateOfBirth),this.nationality=i.nationality,this.number=i.permanentNumber!==void 0?Number(i.permanentNumber):null,this.code=i.code??null}get name(){return`${this.firstName} ${this.lastName}`}get age(){return this.ageAt(new Date)}ageAt(i){let r=i.getFullYear()-this.dateOfBirth.getFullYear();return this.dateOfBirth.getMonth()>i.getMonth()||this.dateOfBirth.getDate()>i.getDate()?r-1:r}circuits(i){return this.api.circuits(this.getOptions(i))}driverStandings(i){return this.api.driverStandings(this.getOptions(i))}laps(i){return this.api.laps(this.getOptions(i))}pitStops(i){return this.api.pitStops(this.getOptions(i))}qualifyingResults(i){return this.api.qualifyingResults(this.getOptions(i))}races(i){return this.api.races(this.getOptions(i))}results(i){return this.api.results(this.getOptions(i))}seasons(i){return this.api.seasons(this.getOptions(i))}sprintResults(i){return this.api.sprintResults(this.getOptions(i))}teams(i){return this.api.teams(this.getOptions(i))}getOptions(i){return{driver:this.id,...i}}};var o=class{constructor(i,r){this.api=r;this.id=i.constructorId??null,this.wikiUrl=i.url??null,this.name=i.name,this.nationality=i.nationality??null}};var x=class{constructor(i,r,n,s){this.api=s;this.season=Number(r),this.round=Number(n),this.position=i.position!==void 0?Number(i.position):null,this.positionText=i.positionText,this.points=Number(i.points),this.wins=Number(i.wins),this.driver=new p(i.Driver,this.api),this.teams=i.Constructors.map(R=>new o(R,this.api))}};var v=class{constructor(i){this.time=i.time}};var m=class{constructor(i){this.rank=Number(i.rank),this.lap=Number(i.lap),this.time=new v(i.Time),this.averageSpeed=i.AverageSpeed!==void 0?new P(i.AverageSpeed):null}};var d=class{constructor(i){this.milliseconds=Number(i.millis),this.time=i.time}};var u=class{constructor(i){this.date=i.date??null,this.time=i.time??null}};var l=class{constructor(i,r){this.api=r;this.season=Number(i.season),this.round=Number(i.round),this.wikiUrl=i.url??null,this.name=i.raceName,this.circuit=new c(i.Circuit,this.api),this.date=i.date,this.time=i.time??null,this.firstPractice=i.FirstPractice!==void 0?new u(i.FirstPractice):null,this.secondPractice=i.SecondPractice!==void 0?new u(i.SecondPractice):null,this.thirdPractice=i.ThirdPractice!==void 0?new u(i.ThirdPractice):null,this.qualifying=i.Qualifying!==void 0?new u(i.Qualifying):null,this.sprint=i.Sprint!==void 0?new u(i.Sprint):null,this.sprintQualifying=i.SprintQualifying!==void 0?new u(i.SprintQualifying):null,this.sprintShootout=i.SprintShootout!==void 0?new u(i.SprintShootout):null}get dateTime(){return new Date(this.time!==null?`${this.date}T${this.time}`:this.date)}};var O=class{constructor(i){this.driverId=i.driverId,this.position=Number(i.position),this.time=i.time}};var w=class{constructor(i,r,n){this.api=n;this.number=Number(i.number),this.timings=i.Timings.map(s=>new O(s)),this.race=new l(r,this.api)}};var L=class{constructor(i,r,n){this.api=n;this.driverId=i.driverId,this.lap=i.lap!==void 0?Number(i.lap):null,this.stop=i.stop!==void 0?Number(i.stop):null,this.time=i.time??null,this.duration=i.duration!==void 0?Number(i.duration):null,this.race=new l(r,this.api)}};var q=class{constructor(i,r,n){this.api=n;this.number=Number(i.number),this.position=i.position!==void 0?Number(i.position):null,this.driver=new p(i.Driver,this.api),this.team=new o(i.Constructor,this.api),this.q1=i.Q1??null,this.q2=i.Q2??null,this.q3=i.Q3??null,this.race=new l(r,this.api)}};var N=class{constructor(i,r,n){this.api=n;this.number=Number(i.number),this.position=i.position,this.positionText=i.positionText,this.points=Number(i.points),this.driver=new p(i.Driver,this.api),this.team=i.Constructor!==void 0?new o(i.Constructor,this.api):null,this.grid=i.grid!==void 0?Number(i.grid):null,this.laps=i.laps!==void 0?Number(i.laps):null,this.status=i.status??null,this.fastestLap=i.FastestLap!==void 0?new m(i.FastestLap):null,this.finishingTime=i.Time!==void 0?new d(i.Time):null,this.race=new l(r,this.api)}get driverAge(){return this.driver.ageAt(this.race.dateTime)}};var C=class{constructor(i,r){this.api=r;this.year=Number(i.season),this.wikiUrl=i.url}};var k=class{constructor(i,r,n){this.api=n;this.number=Number(i.number),this.position=i.position,this.positionText=i.positionText,this.points=Number(i.points),this.driver=new p(i.Driver,this.api),this.team=i.Constructor!==void 0?new o(i.Constructor,this.api):null,this.grid=i.grid!==void 0?Number(i.grid):null,this.laps=i.laps!==void 0?Number(i.laps):null,this.status=i.status??null,this.finishingTime=i.Time!==void 0?new d(i.Time):null,this.fastestLap=i.FastestLap!==void 0?new m(i.FastestLap):null,this.race=new l(r,this.api)}};var F=class{constructor(i,r,n,s){this.api=s;this.season=Number(r),this.round=Number(n),this.position=i.position??null,this.positionText=i.positionText,this.points=Number(i.points),this.wins=Number(i.wins),this.team=new o(i.Constructor,this.api)}};var b=class{constructor(i,r,n,s){this.api=i;this.resource=r;this.options=n;this.transform=s}async get(i){let r=await this.api.get(this.getPath(`/${this.resource}`,this.options),i);return{meta:{limit:Number(r.MRData.limit),offset:Number(r.MRData.offset),total:Number(r.MRData.total)},data:this.transform(r.MRData)}}async getOne(i){let{data:r}=await this.get({limit:1,...i??{}});return r.length>0?r[0]:null}getPath(i,r){let n=[];return r.season&&(n.push(String(r.season)),r.round&&n.push(String(r.round))),r.circuit&&n.push("circuits",r.circuit),r.driver&&n.push("drivers",r.driver),r.team&&n.push("constructors",r.team),r.lap&&n.push("laps",String(r.lap)),r.pitStopNumber&&n.push("pitstops",String(r.pitStopNumber)),r.fastestRank&&n.push("fastest",String(r.fastestRank)),r.gridPosition&&n.push("grid",String(r.gridPosition)),r.finishPosition&&n.push("results",String(r.finishPosition)),r.status&&n.push("status",r.status),r.driverStanding&&n.push("driverstandings",String(r.driverStanding)),r.qualifying&&n.push("qualifying",String(r.qualifying)),r.teamStanding&&n.push("constructorstandings",String(r.teamStanding)),n.length===0?i:`/${n.join("/")}${i}`}};var M=class extends f{circuits(i){return this.makePendingRequest("circuits",r=>r.CircuitTable.Circuits.map(n=>new c(n,this)),i)}driverStandings(i){return new b(this,"driverstandings",i,r=>r.StandingsTable.StandingsLists.flatMap(n=>n.DriverStandings.map(s=>new x(s,n.season,n.round,this))))}drivers(i){return this.makePendingRequest("drivers",r=>r.DriverTable.Drivers.map(n=>new p(n,this)),i)}laps(i){return this.makePendingRequest("laps",r=>r.RaceTable.Races.flatMap(n=>n.Laps.map(s=>new w(s,n,this))),i)}pitStops(i){return this.makePendingRequest("pitstops",r=>r.RaceTable.Races.flatMap(n=>n.PitStops.map(s=>new L(s,n,this))),i)}qualifyingResults(i){return this.makePendingRequest("qualifying",r=>r.RaceTable.Races.flatMap(n=>n.QualifyingResults.map(s=>new q(s,n,this))),i)}races(i){return this.makePendingRequest("races",r=>r.RaceTable.Races.map(n=>new l(n,this)),i)}results(i){return this.makePendingRequest("results",r=>r.RaceTable.Races.flatMap(n=>n.Results.map(s=>new N(s,n,this))),i)}seasons(i){return this.makePendingRequest("seasons",r=>r.SeasonTable.Seasons.map(n=>new C(n,this)),i)}sprintResults(i){return this.makePendingRequest("sprint",r=>r.RaceTable.Races.flatMap(n=>n.SprintResults.map(s=>new k(s,n,this))),i)}teamStandings(i){return this.makePendingRequest("constructorstandings",r=>r.StandingsTable.StandingsLists.flatMap(n=>n.ConstructorStandings.map(s=>new F(s,n.season,n.round,this))),i)}teams(i){return this.makePendingRequest("constructors",r=>r.ConstructorTable.Constructors.map(n=>new o(n,this)),i)}makePendingRequest(i,r,n){return new b(this,i,n??{},r)}};var Q=(e=>(e.Finished="1",e.Disqualified="2",e.Accident="3",e.Collision="4",e.Engine="5",e.Gearbox="6",e.Transmission="7",e.Clutch="8",e.Hydraulics="9",e.Electrical="10",e.Plus1Lap="11",e.Plus2Laps="12",e.Plus3Laps="13",e.Plus4Laps="14",e.Plus5Laps="15",e.Plus6Laps="16",e.Plus7Laps="17",e.Plus8Laps="18",e.Plus9Laps="19",e.SpunOff="20",e.Radiator="21",e.Suspension="22",e.Brakes="23",e.Differential="24",e.Overheating="25",e.Mechanical="26",e.Tyre="27",e.DriverSeat="28",e.Puncture="29",e.Driveshaft="30",e.Retired="31",e.FuelPressure="32",e.FrontWing="33",e.WaterPressure="34",e.Refuelling="35",e.Wheel="36",e.Throttle="37",e.Steering="38",e.Technical="39",e.Electronics="40",e.BrokenWing="41",e.HeatShieldFire="42",e.Exhaust="43",e.OilLeak="44",e.Plus11Laps="45",e.WheelRim="46",e.WaterLeak="47",e.FuelPump="48",e.TrackRod="49",e.Plus17Laps="50",e.OilPressure="51",e.Plus13Laps="53",e.Withdrew="54",e.Plus12Laps="55",e.EngineFire="56",e.Plus26Laps="58",e.TyrePuncture="59",e.OutOfFuel="60",e.WheelNut="61",e.NotClassified="62",e.Pneumatics="63",e.Handling="64",e.RearWing="65",e.Fire="66",e.WheelBearing="67",e.Physical="68",e.FuelSystem="69",e.OilLine="70",e.FuelRig="71",e.LaunchControl="72",e.Injured="73",e.Fuel="74",e.PowerLoss="75",e.Vibrations="76",e.Safety="78",e.Drivetrain="79",e.Ignition="80",e.Injury="82",e.Chassis="83",e.Battery="84",e.Stalled="85",e.Halfshaft="86",e.Crankshaft="87",e.Plus10Laps="88",e.SafetyConcerns="89",e.NotRestarted="90",e.Alternator="91",e.Underweight="92",e.SafetyBelt="93",e.OilPump="94",e.FuelLeak="95",e.Excluded="96",e.Injection="98",e.Distributor="99",e.DriverUnwell="100",e.Turbo="101",e.CVJoint="102",e.WaterPump="103",e.FatalAccident="104",e.SparkPlugs="105",e.FuelPipe="106",e.EyeInjury="107",e.OilPipe="108",e.Axle="109",e.WaterPipe="110",e.Plus14Laps="111",e.Plus15Laps="112",e.Plus25Laps="113",e.Plus18Laps="114",e.Plus22Laps="115",e.Plus16Laps="116",e.Plus24Laps="117",e.Plus29Laps="118",e.Plus23Laps="119",e.Plus21Laps="120",e.Magneto="121",e.Plus44Laps="122",e.Plus30Laps="123",e.Plus19Laps="124",e.Plus46Laps="125",e.Supercharger="126",e.Plus20Laps="127",e.Plus42Laps="128",e.EngineMisfire="129",e.CollisionDamage="130",e.PowerUnit="131",e.ERS="132",e.BrakeDuct="135",e.Seat="136",e.Damage="137",e.Debris="138",e.Illness="139",e.Undertray="140",e.CoolingSystem="141",e.DidNotStart="142",e.Lapped="143",e))(Q||{});0&&(module.exports={Api,BadRequest,BaseApi,HttpError,NotFound,PendingRequest,StatusType});
