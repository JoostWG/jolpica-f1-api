"use strict";var E=Object.create;var R=Object.defineProperty;var Q=Object.getOwnPropertyDescriptor;var W=Object.getOwnPropertyNames;var G=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var H=(t,i)=>{for(var r in i)R(t,r,{get:i[r],enumerable:!0})},B=(t,i,r,n)=>{if(i&&typeof i=="object"||typeof i=="function")for(let o of W(i))!j.call(t,o)&&o!==r&&R(t,o,{get:()=>i[o],enumerable:!(n=Q(i,o))||n.enumerable});return t};var $=(t,i,r)=>(r=t!=null?E(G(t)):{},B(i||!t||!t.__esModule?R(r,"default",{value:t,enumerable:!0}):r,t)),V=t=>B(R({},"__esModule",{value:!0}),t);var J={};H(J,{Api:()=>F,BadRequest:()=>h,BaseApi:()=>g,HttpError:()=>a,NotFound:()=>f,PendingRequest:()=>c,StatusType:()=>U});module.exports=V(J);var P=$(require("axios"));var a=class extends Error{constructor(r,n){super(n);this.status=r}};var h=class extends a{constructor(r){super(400,r);this.detail=r}};var f=class extends a{constructor(r,n){super(404,n);this.response=r}};var g=class{constructor({cache:i,config:r}={}){this.axios=P.default.create({baseURL:"https://api.jolpi.ca/ergast/f1",validateStatus:n=>n>=200&&n<=299||n>=400&&n<=499,...r}),this.cache=i}async get(i,r,n){if(this.cache){let I=await this.cache.get(i,r);if(I!==null)return I}let o=await this.axios.get(`${i}.json`,{headers:new P.AxiosHeaders().setAccept("application/json"),params:r,...n});if(o.status===404)throw new f(o);if(this.responseIsBadRequest(o))throw new h(o.data.detail);if(o.status!==200)throw new a(o.status);let M=o.data;return this.cache&&await this.cache.set(M,o.headers["Cache-Control"],i,r),M}responseIsBadRequest(i){return i.status===400}};var c=class{constructor(i,r,n,o){this.api=i;this.resource=r;this.options=n;this.transform=o}async get(i){let r=await this.api.get(this.getPath(`/${this.resource}`,this.options),i);return{meta:{limit:Number(r.MRData.limit),offset:Number(r.MRData.offset),total:Number(r.MRData.total)},data:this.transform(r.MRData)}}async getOne(i){let{data:r}=await this.get({limit:1,...i??{}});return r.length>0?r[0]:null}getPath(i,r){let n=[];return r.season&&(n.push(String(r.season)),r.round&&n.push(String(r.round))),r.circuit&&n.push("circuits",r.circuit),r.driver&&n.push("drivers",r.driver),r.team&&n.push("constructors",r.team),r.lap&&n.push("laps",String(r.lap)),r.pitStopNumber&&n.push("pitstops",String(r.pitStopNumber)),r.fastestRank&&n.push("fastest",String(r.fastestRank)),r.gridPosition&&n.push("grid",String(r.gridPosition)),r.finishPosition&&n.push("results",String(r.finishPosition)),r.status&&n.push("status",r.status),n.length===0?i:`/${n.join("/")}${i}`}};var D=class{constructor(i){this.units=i.units,this.speed=Number(i.speed)}};var O=class{constructor(i){this.latitude=Number(i.lat),this.longitude=Number(i.long),this.locality=i.locality,this.country=i.country}};var m=class{constructor(i){this.id=i.circuitId,this.wikiUrl=i.url,this.name=i.circuitName,this.location=new O(i.Location)}};var p=class{constructor(i){this.id=i.driverId,this.wikiUrl=i.url,this.firstName=i.givenName,this.lastName=i.familyName,this.dateOfBirth=new Date(i.dateOfBirth),this.nationality=i.nationality,this.number=i.permanentNumber!==void 0?Number(i.permanentNumber):null,this.code=i.code??null}};var s=class{constructor(i){this.id=i.constructorId??null,this.wikiUrl=i.url??null,this.name=i.name,this.nationality=i.nationality??null}};var x=class{constructor(i,r,n){this.season=Number(r),this.round=Number(n),this.position=i.position!==void 0?Number(i.position):null,this.positionText=i.positionText,this.points=Number(i.points),this.wins=Number(i.wins),this.driver=new p(i.Driver),this.teams=i.Constructors.map(o=>new s(o))}};var y=class{constructor(i){this.time=i.time}};var d=class{constructor(i){this.rank=Number(i.rank),this.lap=Number(i.lap),this.time=new y(i.Time),this.averageSpeed=i.AverageSpeed!==void 0?new D(i.AverageSpeed):null}};var b=class{constructor(i){this.milliseconds=Number(i.millis),this.time=i.time}};var u=class{constructor(i){this.date=i.date??null,this.time=i.time??null}};var l=class{constructor(i){this.season=Number(i.season),this.round=Number(i.round),this.wikiUrl=i.url??null,this.name=i.raceName,this.circuit=new m(i.Circuit),this.date=i.date,this.time=i.time??null,this.firstPractice=i.FirstPractice!==void 0?new u(i.FirstPractice):null,this.secondPractice=i.SecondPractice!==void 0?new u(i.SecondPractice):null,this.thirdPractice=i.ThirdPractice!==void 0?new u(i.ThirdPractice):null,this.qualifying=i.Qualifying!==void 0?new u(i.Qualifying):null,this.sprint=i.Sprint!==void 0?new u(i.Sprint):null,this.sprintQualifying=i.SprintQualifying!==void 0?new u(i.SprintQualifying):null,this.sprintShootout=i.SprintShootout!==void 0?new u(i.SprintShootout):null}};var A=class{constructor(i){this.driverId=i.driverId,this.position=Number(i.position),this.time=i.time}};var w=class{constructor(i,r){this.number=Number(i.number),this.timings=i.Timings.map(n=>new A(n)),this.race=new l(r)}};var v=class{constructor(i,r){this.driverId=i.driverId,this.lap=i.lap!==void 0?Number(i.lap):null,this.stop=i.stop!==void 0?Number(i.stop):null,this.time=i.time??null,this.duration=i.duration!==void 0?Number(i.duration):null,this.race=new l(r)}};var L=class{constructor(i,r){this.number=Number(i.number),this.position=i.position!==void 0?Number(i.position):null,this.driver=new p(i.Driver),this.team=new s(i.Constructor),this.q1=i.Q1??null,this.q2=i.Q2??null,this.q3=i.Q3??null,this.race=new l(r)}};var N=class{constructor(i,r){this.number=Number(i.number),this.position=i.position,this.positionText=i.positionText,this.points=Number(i.points),this.driver=new p(i.Driver),this.team=i.Constructor!==void 0?new s(i.Constructor):null,this.grid=i.grid!==void 0?Number(i.grid):null,this.laps=i.laps!==void 0?Number(i.laps):null,this.status=i.status??null,this.fastestLap=i.FastestLap!==void 0?new d(i.FastestLap):null,this.finishingTime=i.Time!==void 0?new b(i.Time):null,this.race=new l(r)}};var q=class{constructor(i){this.year=Number(i.season),this.wikiUrl=i.url}};var C=class{constructor(i,r){this.number=Number(i.number),this.position=i.position,this.positionText=i.positionText,this.points=Number(i.points),this.driver=new p(i.Driver),this.team=i.Constructor!==void 0?new s(i.Constructor):null,this.grid=i.grid!==void 0?Number(i.grid):null,this.laps=i.laps!==void 0?Number(i.laps):null,this.status=i.status??null,this.finishingTime=i.Time!==void 0?new b(i.Time):null,this.fastestLap=i.FastestLap!==void 0?new d(i.FastestLap):null,this.race=new l(r)}};var k=class{constructor(i,r,n){this.season=Number(r),this.round=Number(n),this.position=i.position??null,this.positionText=i.positionText,this.points=Number(i.points),this.wins=Number(i.wins),this.team=new s(i.Constructor)}};var F=class extends g{circuits(i){return this.makePendingRequest("circuits",r=>r.CircuitTable.Circuits.map(n=>new m(n)),i)}driverStandings(i){return new c(this,"driverstandings",i,r=>r.StandingsTable.StandingsLists.flatMap(n=>n.DriverStandings.map(o=>new x(o,n.season,n.round))))}drivers(i){return this.makePendingRequest("drivers",r=>r.DriverTable.Drivers.map(n=>new p(n)),i)}laps(i){return this.makePendingRequest("laps",r=>r.RaceTable.Races.flatMap(n=>n.Laps.map(o=>new w(o,n))),i)}pitStops(i){return this.makePendingRequest("pitstops",r=>r.RaceTable.Races.flatMap(n=>n.PitStops.map(o=>new v(o,n))),i)}qualifyingResults(i){return this.makePendingRequest("qualifying",r=>r.RaceTable.Races.flatMap(n=>n.QualifyingResults.map(o=>new L(o,n))),i)}races(i){return this.makePendingRequest("races",r=>r.RaceTable.Races.map(n=>new l(n)),i)}results(i){return this.makePendingRequest("results",r=>r.RaceTable.Races.flatMap(n=>n.Results.map(o=>new N(o,n))),i)}seasons(i){return this.makePendingRequest("seasons",r=>r.SeasonTable.Seasons.map(n=>new q(n)),i)}sprintResults(i){return this.makePendingRequest("sprint",r=>r.RaceTable.Races.flatMap(n=>n.SprintResults.map(o=>new C(o,n))),i)}teamStandings(i){return this.makePendingRequest("constructorstandings",r=>r.StandingsTable.StandingsLists.flatMap(n=>n.ConstructorStandings.map(o=>new k(o,n.season,n.round))),i)}teams(i){return this.makePendingRequest("constructors",r=>r.ConstructorTable.Constructors.map(n=>new s(n)),i)}makePendingRequest(i,r,n){return new c(this,i,n??{},r)}};var U=(e=>(e.Finished="1",e.Plus1Lap="11",e.Engine="5",e.Plus2Laps="12",e.Accident="3",e.Collision="4",e.Gearbox="6",e.SpunOff="20",e.Plus3Laps="13",e.Suspension="22",e.Plus4Laps="14",e.Transmission="7",e.Electrical="10",e.Lapped="143",e.Brakes="23",e.Withdrew="54",e.Retired="31",e.Plus5Laps="15",e.Clutch="8",e.NotClassified="62",e.FuelSystem="69",e.Plus6Laps="16",e.Disqualified="2",e.Turbo="101",e.Hydraulics="9",e.Overheating="25",e.Ignition="80",e.OilLeak="44",e.Throttle="37",e.OutOfFuel="60",e.Plus7Laps="17",e.Halfshaft="86",e.Wheel="36",e.OilPressure="51",e.FuelPump="48",e.Differential="24",e.Tyre="27",e.Handling="64",e.Plus8Laps="18",e.FuelLeak="95",e.CollisionDamage="130",e.Steering="38",e.Radiator="21",e.PowerUnit="131",e.Puncture="29",e.Plus9Laps="19",e.WheelBearing="67",e.Injection="98",e.FuelPressure="32",e.Plus10Laps="88",e.WaterLeak="47",e.Alternator="91",e.Physical="68",e.Exhaust="43",e.Chassis="83",e.Mechanical="26",e.Magneto="121",e.Driveshaft="30",e.Axle="109",e.HeatShieldFire="42",e.Plus11Laps="45",e.Battery="84",e.Distributor="99",e.OilPump="94",e.PowerLoss="75",e.Plus13Laps="53",e.Injury="82",e.Plus12Laps="55",e.Plus14Laps="111",e.OilPipe="108",e.BrokenWing="41",e.Electronics="40",e.DriverUnwell="100",e.Vibrations="76",e.Plus15Laps="112",e.DidNotStart="142",e.RearWing="65",e.WheelNut="61",e.Excluded="96",e.WaterPressure="34",e.Plus16Laps="116",e.Plus17Laps="50",e.Injured="73",e.WaterPump="103",e.ERS="132",e.FrontWing="33",e.Supercharger="126",e.Plus18Laps="114",e.Plus19Laps="124",e.Plus22Laps="115",e.Plus24Laps="117",e.Fuel="74",e.Pneumatics="63",e.Technical="39",e.Plus25Laps="113",e.FatalAccident="104",e.Fire="66",e.FuelPipe="106",e.SparkPlugs="105",e.Undertray="140",e.WaterPipe="110",e.WheelRim="46",e.Damage="137",e.Drivetrain="79",e.FuelRig="71",e.Illness="139",e.OilLine="70",e.Safety="78",e.SafetyConcerns="89",e.Stalled="85",e.TrackRod="49",e.Plus20Laps="127",e.Plus21Laps="120",e.Plus23Laps="119",e.Plus26Laps="58",e.Plus29Laps="118",e.Plus30Laps="123",e.Plus42Laps="128",e.Plus44Laps="122",e.Plus46Laps="125",e.BrakeDuct="135",e.CoolingSystem="141",e.Crankshaft="87",e.CVJoint="102",e.Debris="138",e.DriverSeat="28",e.EngineFire="56",e.EngineMisfire="129",e.EyeInjury="107",e.LaunchControl="72",e.NotRestarted="90",e.Refuelling="35",e.SafetyBelt="93",e.Seat="136",e.TyrePuncture="59",e.Underweight="92",e))(U||{});0&&(module.exports={Api,BadRequest,BaseApi,HttpError,NotFound,PendingRequest,StatusType});
